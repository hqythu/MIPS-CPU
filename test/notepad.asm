START:
	LI		R1 0X80
	SLL		R1 R1 0X0
	LI		R2 0X0
	SW		R1 R2 0X0
	SW		R1 R2 0X1
	SW		R1 R2 0X2
	SW		R1 R2 0X3
	SW 		R1 R2 0X4
INIT:
	LI		R0 0XF8
	SLL		R0 R0 0X0
	LI		R2 0X04
	SLL		R2 R2 0X0
	ADDIU 	R2 0X50
	ADDIU 	R2 0X60
	LI		R3 0X0
INIT_F800:
	SW 		R0 R0 0X0
	ADDIU 	R0 0X1
	ADDIU 	R2 0XFF
	CMP		R2 R3
	BTNEZ 	INIT_F800
	NOP
	LI 		R0 0XF8
	SLL		R0 R0 0X0
	LI		R2 0XFF
	SW 		R0 R2 0X0

LOOP_START:
	B 		TESTW
	NOP
READ:
	LI		R0 0XBF
	SLL		R0 R0 0X0
	LW		R0 R2 0X02
	LI		R1 0X80
	SLL		R1 R1 0X0
	SW 		R1 R2 0X04
	;SWITCH
	LI		R3 0X21
	CMP		R2 R3
	BTEQZ	UP			;UP
	NOP
	LI		R3 0X22
	CMP		R2 R3
	BTEQZ	LEFT		;LEFT
	NOP
	LI		R3 0X23
	CMP		R2 R3
	BTEQZ	DOWN		;DOWN
	NOP
	LI		R3 0X24
	CMP		R2 R3
	BTEQZ	RIGHT		;RIGHT
	NOP
	LI		R3 0X12
	CMP		R2 R3
	BTEQZ	ENTER		;ENTER
	NOP
	LI		R3 0X08
	CMP		R2 R3
	BTEQZ	BACKSPACE	;BACKSPACE
	NOP
	LI		R3 0X1B
	CMP		R2 R3
	BTEQZ	ESC			;ESC
	NOP
	LI		R3 0X20
	CMP		R2 R3
	BTEQZ	SPACE		;SPACE
	NOP
	LI		R3 0X25
	CMP		R2 R3
	BTEQZ	SPACE		;SPACE
	NOP
OTHERS:
	MFPC	R5
	ADDIU 	R5 0X2
	B 		GET_ADD_TO_R0
	NOP
	LI		R1 0X80
	LW		R1 R2 0X4
	SW 		R0 R2 0X0
	LW		R0 R2 0X1
	LI		R3 0X0
	SUBU	R3 R2 R2
	SW 		R0 R2 0X1
	MFPC	R5
	ADDIU 	R5 0X2
	B 		MOVE_TO_NEXT
	NOP
	B 		LOOP_START
	NOP

GET_ADD_TO_R0:
	LI		R1 0X80
	SLL		R1 R1 0X0
	LW		R1 R3 0X0
	LI		R0 0XF8
	SLL		R0 R0 0X0
FIND_ADD:
	LI		R4 0X0
	CMP		R3 R4
	BTEQZ 	END_FIND
	NOP
	ADDIU 	R0 0X28		;ADD 40
	ADDIU 	R3 0XFF
	B 		FIND_ADD
	NOP
END_FIND:
	LW		R1 R4 0X1
	ADDU 	R0 R4 R0
	JR 		R5
	NOP


MOVE_TO_NEXT:
	LI		R1 0X80
	SLL		R1 R1 0X0
	LW		R1 R2 0X0
	LW		R1 R3 0X1
	ADDIU 	R3 0X1
	LI		R4 0X28
	CMP		R3 R4
	BTNEZ 	FINISH_MOVE
	LI		R3 0X0
	ADDIU 	R2 0X1
FINISH_MOVE:
	SW 		R1 R2 0X0
	SW 		R1 R3 0X1
	JR		R5
	NOP

UP:
	B 		LOOP_START
	NOP
LEFT:
	B 		LOOP_START
	NOP
DOWN:
	B 		LOOP_START
	NOP
RIGHT:
	B 		LOOP_START
	NOP
ENTER:
	B 		LOOP_START
	NOP

BACKSPACE:

	B 		LOOP_START
	NOP

ESC:
	B 		START
	NOP

SPACE:
	MFPC	R5
	ADDIU 	R5 0X2
	B 		GET_ADD_TO_R0
	NOP
	LI		R2 0X0
	SW 		R0 R2 0X0
	LW		R0 R2 0X1
	LI		R3 0X0
	SUBU	R3 R2 R2
	SW 		R0 R2 0X1
	MFPC	R5
	ADDIU 	R5 0X2
	B 		MOVE_TO_NEXT
	NOP
	B 		LOOP_START
	NOP

TESTW:
	LI		R0 0XBF
	SLL		R0 R0 0X0
	ADDIU	R0 0X1
	LW		R0 R2 0X3
	LI		R5 0X1
	AND		R2 R5
	BEQZ 	R2 TESTW
	NOP
	B 		READ
	NOP
